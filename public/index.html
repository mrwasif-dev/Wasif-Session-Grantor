<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Wasif MD Session Generator</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Playfair+Display:wght@600&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Poppins}
body{
  min-height:100vh;
  background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  display:flex;justify-content:center;align-items:center;color:#fff
}
.hidden{display:none}
.app{width:100%;max-width:420px;padding:20px}

.card{
  background:rgba(255,255,255,.08);
  padding:22px;
  border-radius:20px;
  box-shadow:0 20px 40px rgba(0,0,0,.4);
  animation:fade .4s ease;
  text-align:center
}
@keyframes fade{from{opacity:0;transform:translateY(20px)}to{opacity:1}}

h1{
  font-size:22px;
  background:linear-gradient(90deg,#00f2fe,#4facfe,#43e97b);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  margin-bottom:14px
}

.btn{
  width:100%;padding:14px;margin:8px 0;
  border:none;border-radius:14px;
  font-size:16px;color:#fff;cursor:pointer
}
.b1{background:linear-gradient(90deg,#36d1dc,#5b86e5)}
.b2{background:linear-gradient(90deg,#11998e,#38ef7d)}
.b3{background:linear-gradient(90deg,#fc466b,#3f5efb)}
.btn:disabled{opacity:.4}

.back{
  width:32px;height:32px;border-radius:50%;
  background:linear-gradient(135deg,#667eea,#764ba2);
  display:flex;align-items:center;justify-content:center;
  cursor:pointer;margin-bottom:10px
}

input,select{
  padding:12px;border-radius:12px;border:none;font-size:15px
}
.row{
  display:flex;gap:8px
}
.row select{width:35%}
.row input{width:65%}

.loader{
  width:40px;height:40px;border:4px solid #fff;
  border-top:4px solid transparent;
  border-radius:50%;animation:spin 1s linear infinite;
  margin:14px auto
}
@keyframes spin{to{transform:rotate(360deg)}}

.nameHighlight{
  font-family:'Playfair Display',serif;
  font-size:26px;color:#ffd200;margin:6px 0
}
</style>
</head>

<body>
<div class="app">

<!-- NAME -->
<div id="name" class="card">
  <h1>Enter Your Good Name</h1>
  <input id="fname" placeholder="First Name (Required)">
  <input id="lname" placeholder="Second Name (Optional)">
  <div id="nErr" style="color:#ff6b6b;font-size:13px"></div>
  <button id="nBtn" class="btn b1" disabled>Submit</button>
</div>

<!-- HOME -->
<div id="home" class="card hidden">
  <div>Dear</div>
  <div id="uname" class="nameHighlight"></div>
  <div>Welcome To Wasif MD Session Generator</div>
  <button class="btn b1" onclick="show('pair')">Link With Phone Number</button>
  <button class="btn b2" onclick="show('help')">Help</button>
</div>

<!-- PAIR -->
<div id="pair" class="card hidden">
  <div class="back" onclick="show('home')">â€¹</div>
  <h1>Pair WhatsApp</h1>

  <div class="row">
    <select id="cc">
      <option value="+92">ðŸ‡µðŸ‡° +92</option>
      <option value="+1">ðŸ‡ºðŸ‡¸ +1</option>
      <option value="+44">ðŸ‡¬ðŸ‡§ +44</option>
    </select>
    <input id="num" placeholder="3XXXXXXXXX">
  </div>

  <button class="btn b2" onclick="requestPair()">Request A Pair</button>
</div>

<!-- CODE -->
<div id="codeBox" class="card hidden">
  <h1>Enter This Code In WhatsApp</h1>
  <input id="pairCode" readonly>
  <button class="btn b3" onclick="copyCode()">Copy Code</button>
</div>

<!-- LOGIN -->
<div id="login" class="card hidden">
  <h1>Device Logging</h1>
  <div class="loader"></div>
  <div>Please waitâ€¦</div>
</div>

<!-- SESSION -->
<div id="session" class="card hidden">
  <h1>Session ID</h1>
  <input id="sid" readonly>
</div>

<!-- HELP -->
<div id="help" class="card hidden">
  <div class="back" onclick="show('home')">â€¹</div>
  <h1>Welcome To Help Section</h1>
  <button class="btn b1" onclick="show('admin')">Contact Admin</button>
  <button class="btn b2" onclick="window.open('https://whatsapp.com/channel/0029Vasn4ipCBtxCxfJqgV3S')">Owner Channel</button>
</div>

<!-- ADMIN -->
<div id="admin" class="card hidden">
  <div class="back" onclick="show('help')">â€¹</div>
  <h1>Contact Admin</h1>
  <button class="btn b1" onclick="wa('+923039107958')">Wasif</button>
  <button class="btn b2" onclick="wa('+923053956147')">Muzammil</button>
</div>

</div>

<script>
const fname=fnameInput=document.getElementById("fname");
const lname=document.getElementById("lname");
const err=document.getElementById("nErr");
const btn=document.getElementById("nBtn");

const valid=n=>/^[A-Z][a-z]+$/.test(n);

fname.oninput=lname.oninput=()=>{
  if(!fname.value) return err.textContent="First Name required",btn.disabled=true;
  if(!valid(fname.value)|| (lname.value && !valid(lname.value)))
    return err.textContent="Format: Muzammil",btn.disabled=true;
  err.textContent="";btn.disabled=false;
};

btn.onclick=()=>{
  uname.innerText=fname.value+(lname.value?" "+lname.value:"");
  show("home");
};

function show(id){
  document.querySelectorAll(".card").forEach(c=>c.classList.add("hidden"));
  document.getElementById(id).classList.remove("hidden");
}

function wa(n){window.open("https://wa.me/"+n.replace("+",""))}

async function requestPair(){
  const phone=cc.value+num.value;
  show("codeBox");

  // ðŸ”´ REAL BACKEND CALL
  const r=await fetch("/pair",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone})});
  const d=await r.json();

  pairCode.value=d.code;

  setTimeout(()=>{
    show("login");
    setTimeout(()=>{
      show("session");
      sid.value=d.session;
    },4000);
  },8000);
}

function copyCode(){
  navigator.clipboard.writeText(pairCode.value);
}
</script>

</body>
</html>
