<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Wasif Session Generator</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{box-sizing:border-box}
body{
  margin:0;
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:linear-gradient(135deg,#667eea,#764ba2);
  font-family:Arial,Helvetica,sans-serif;
  color:#fff;
}
.card{
  width:90%;
  max-width:420px;
  background:#1e1e2f;
  border-radius:18px;
  padding:25px;
  box-shadow:0 20px 40px rgba(0,0,0,.4);
}
h2{text-align:center;margin-bottom:20px}
button{
  width:100%;
  padding:14px;
  margin:10px 0;
  border:none;
  border-radius:12px;
  font-size:16px;
  cursor:pointer;
}
.green{background:#4CAF50;color:#fff}
.blue{background:#2196F3;color:#fff}
.orange{background:#FF9800;color:#fff}
.purple{background:#9C27B0;color:#fff}
.gray{background:#607D8B;color:#fff}

input{
  width:100%;
  padding:14px;
  border-radius:12px;
  border:none;
  margin:12px 0;
  font-size:16px;
}
.back{
  cursor:pointer;
  font-size:20px;
  margin-bottom:10px;
  display:inline-block;
}
pre{
  background:#000;
  padding:12px;
  border-radius:10px;
  overflow:auto;
}
.hidden{display:none}
</style>
</head>

<body>

<div class="card" id="home">
  <h2>WhatsApp Session Generator</h2>
  <button class="green" onclick="show('phone')">Link With Phone Number</button>
  <button class="blue" onclick="show('qr')">Link With QR</button>
  <button class="orange" onclick="show('help')">Help</button>
</div>

<div class="card hidden" id="phone">
  <span class="back" onclick="back()">⬅</span>
  <h2>Link With Phone</h2>
  <input id="phoneInput" placeholder="92XXXXXXXXXX">
  <button class="green" onclick="pair()">Request Pair</button>
  <pre id="pairCode"></pre>
</div>

<div class="card hidden" id="qr">
  <span class="back" onclick="back()">⬅</span>
  <h2>Scan QR</h2>
  <img id="qrImg" style="width:100%;border-radius:12px">
</div>

<div class="card hidden" id="help">
  <span class="back" onclick="back()">⬅</span>
  <h2>Help</h2>
  <button class="purple" onclick="show('admin')">Contact Admin</button>
  <button class="gray" onclick="openChannel()">Owner Channel</button>
</div>

<div class="card hidden" id="admin">
  <span class="back" onclick="show('help')">⬅</span>
  <h2>Admins</h2>
  <button class="green" onclick="openWhatsApp()">Wasif</button>
  <button class="blue">Muzammil</button>
  <button class="orange">Hadi</button>
</div>

<script>
function show(id){
  document.querySelectorAll('.card').forEach(c=>c.classList.add('hidden'));
  document.getElementById(id).classList.remove('hidden');
}
function back(){show('home');}

function openChannel(){
  window.open("https://whatsapp.com/channel/0029Vasn4ipCBtxCxfJqgV3S","_blank");
}
function openWhatsApp(){
  window.open("https://wa.me/923039107958","_blank");
}

/* backend calls */
async function loadQR(){
  const r = await fetch("/qr");
  const d = await r.json();
  if(d.qr) qrImg.src=d.qr;
}
async function pair(){
  const phone = phoneInput.value;
  const r = await fetch("/pair",{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({phone})
  });
  const d = await r.json();
  pairCode.innerText=d.code || d.error;
}
</script>

</body>
</html>
